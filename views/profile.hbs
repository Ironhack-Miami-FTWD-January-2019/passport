<div class="row">

<div class="col-3">
  <div class="flex-center  scroll">
    
<h1>YOUR HOTSPOTS:</h1>

  <div class="scroll">
    {{#each hotspots}}
      <div class="card flex-center">
        <div class="card-body">
          <h4>NAME: {{this.name}}</h4><br>
          LOCATION: {{location}}<br>
          TYPE: {{kind}}<br>
          GENRE: {{genre}}<br>
          # OF VISITS: {{visits}}<br>
        </div>
      </div>
  
      <form class="flex-center" id="recheck" action="/recheck/{{_id}}" method="POST">
        <button class="btn btn-primary hot" type="submit">Check in again!</button>
      </form>
      
      <br>
      
      <form class="flex-center" id="delete" action="/delete/{{_id}}" method="POST">
        <button class="btn btn-primary cold" type="submit">Delete HotSpot</button>
      </form>

    {{/each}}
    </div>
  </div>
</div>



  <div class="col-9">
{{#if user}}
  <div class="center">
    <h4>{{user.username}}'s Profile Page</h4>
  </div>
{{/if}}

<br>




{{!-- MAP ATTEMPTS --}}

<div id="map"></div>
{{data}}
<script>
  function initMap(){
    // Map Options
    var options = {
      zoom:16,
      center: {lat:25.7661932, lng: -80.19618059999999}
    }
    // New Map
    var map = new 
    google.maps.Map(document.getElementById('map'), options);

    //listen for click on map
    google.maps.event.addListener(map, 'click',
    function(event){
      addMarker({coords:event.latLng});
    })

    //var currentUser = JSON.parse('{{{json user}}}');
    let markers = JSON.parse('{{{json hotspots}}}')
    console.log(markers)

    for(var i=0; i<markers.length; i++){
      addMarker(markers[i]);
    }

    //Add Marker function
      function addMarker(props){
        console.log(props)
        var marker = new google.maps.Marker({
        position: {lat:Number(props.lat), lng:Number(props.lon)},//props.coords,
        map:map,
      });
      //check content
      if(props.name){
        var infoWindow = new google.maps.InfoWindow({
      content: props.name
    });
    marker.addListener('click', function(){
      infoWindow.open(map, marker);
    });
      }
    }
  }
</script>
<script async defer
src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBDHQg3R9w2fSbdKrYv1vrKAE5sdOJ2uLU&callback=initMap">
</script>

{{!-- {{hotspotsFromDb}} --}}
  <div class='center'>
    <a class="button" href='create'>Create New Hotspot</a>
  </div>
</div>