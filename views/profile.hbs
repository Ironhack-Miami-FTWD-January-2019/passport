
 <br>
{{#if user}}
  <div>
    <h4>{{user.username}}'s Profile Page</h4>
  </div>
{{/if}}

<br>

<a href='create'>Create New Hotspot</a>


{{!-- MAP ATTEMPTS --}}

<div id="map"></div>
{{data}}
<script>
  function initMap(){
    // Map Options
    var options = {
      zoom:16,
      center: {lat:25.7661932, lng: -80.19618059999999}
    }
    // New Map
    var map = new 
    google.maps.Map(document.getElementById('map'), options);

    //listen for click on map
    google.maps.event.addListener(map, 'click',
    function(event){
      addMarker({coords:event.latLng});
    })

    //var currentUser = JSON.parse('{{{json user}}}');
    let markers = JSON.parse('{{{json hotspots}}}')
    console.log(markers)

    for(var i=0; i<markers.length; i++){
      addMarker(markers[i]);
    }

    //Add Marker function
      function addMarker(props){
        console.log(props)
        var marker = new google.maps.Marker({
        position: {lat:Number(props.lat), lng:Number(props.lon)},//props.coords,
        map:map,
      });
      //check content
      if(props.name){
        var infoWindow = new google.maps.InfoWindow({
      content: props.name
    });
    marker.addListener('click', function(){
      infoWindow.open(map, marker);
    });
      }
    }
  }
</script>
<script async defer
src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBDHQg3R9w2fSbdKrYv1vrKAE5sdOJ2uLU&callback=initMap">
</script>

{{!-- {{hotspotsFromDb}} --}}

<h1>YOUR HOTSPOTS:</h1>

{{#each hotspots}}
  <div>
    <h2>NAME: {{this.name}}</h2> <br>
    <h2>LOCATION: {{location}}</h2> <br>
    <h2>TYPE: {{kind}}</h2> <br>
    <h2>GENRE: {{genre}}</h2> <br>
    <h2># OF VISITS: {{visits}}</h2> <br>
  </div>
  
  <form id="recheck" action="/recheck/{{_id}}" method="POST">
    <button type="submit">Check in again!</button>
  </form>
  
  <br>
  
  <form id="delete" action="/delete/{{_id}}" method="POST">
    <button type="submit">Delete HotSpot</button>
  </form>

{{/each}}